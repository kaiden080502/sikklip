<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SIKKLIP</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw/dist/leaflet.draw.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-draw/dist/leaflet.draw.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/@turf/turf/turf.min.js"></script>

    <style>
       html, body {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
        }
        .container {
            flex: 1;
            padding: 20px;
            text-align: center;
        }
        #map {
            height: 400px; /* Atur tinggi peta */
        }
        .footer {
            background-color: #343a40;
            color: #ffffff;
            padding: 1rem;  
            text-align: center;
            width: 100%;
        }
        .footer p {
            margin: 0;
        }
/* Container utama form */
/* Container utama form */
#searchForm {
    display: flex;
    justify-content: center; /* Pusatkan elemen */
    align-items: center; /* Vertikal tengah */
    flex-wrap: wrap; /* Biar bisa membungkus di layar kecil */
    max-width: 100%; /* Lebar maksimum untuk responsif */
    padding: 5px; /* Mengurangi padding */
}

/* Container tombol dan input */
#buttonContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
}

/* Tombol toggle */
#toggleButton {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 8px 16px; /* Mengurangi padding */
    border-radius: 5px;
    cursor: pointer;
    margin-right: 5px; /* Mengurangi margin */
}

#toggleButton:hover {
    background-color: #0056b3;
}

/* Container input yang tersembunyi */
#inputFields {
    display: none;
    margin-left: 5px; /* Mengurangi margin */
    transition: all 0.5s ease;
    flex-wrap: wrap;
    text-align: center
}

#inputFields input,
#inputFields button {
    padding: 8px; /* Mengurangi padding */
    margin-top: 3px; /* Mengurangi margin */
    margin-left: 3px; /* Mengurangi margin */
    border: 1px solid #ccc;
    border-radius: 10px;
    flex: 1; /* Agar elemen dapat berkembang */
    text-align: center; 
}

#inputFields button {
    background-color: #007bff;
    color: white;
    border: none;
    cursor: pointer;
}

#inputFields button:hover {
    background-color: #0056b3;
}

/* Responsivitas */
@media (max-width: 768px) {
    #buttonContainer {
        flex-direction: column;
        align-items: center;
    }

    #inputFields {
        margin-left: 0;
        width: 100%;
    }

    #inputFields input,
    #inputFields button {
        width: 100%;
        margin-top: 5px; /* Mengurangi jarak antar elemen */
    }
}


        #map {
            width: 100%;
            height: 600px;
            margin-bottom: 20px;
            margin-top: 10px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        .leaflet-draw {
            z-index: 1000;
        }
        .leaflet-popup-content button {
            margin-top: 10px;
            padding: 5px 10px;
            background-color: #008cba;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .leaflet-popup-content button:hover {
            background-color: #005f6b;
        }
        .info.legend {
            background: white;
            line-height: 1.5;
            color: #333;
            border-radius: 5px;
            padding: 6px 8px;
            font-size: 12px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            margin: 10px;
        }
        .info.legend i {
            width: 18px;
            height: 18px;
            float: left;
            margin-right: 8px;
            opacity: 0.7;
        }
        .info {
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 1px 5px rgba(0,0,0,0.65);
            text-align: left;
        }
        .dropdown {
            position: absolute;
            bottom: 5px;
            left: 1px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            z-index: 1000;
        }
        .dropdown button {
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .dropdown-content {
            display: none;
            padding: 10px;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .checkbox {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        .checkbox input[type="checkbox"] {
            margin-right: 5px;
        }
        .icon {
            width: 20px;
            height: 20px;
            background-image: url('../../image/logo.png');
            background-size: contain;
            background-repeat: no-repeat;
            display: inline-block;
            margin-right: 5px;
        }
    

        
        @media (max-width: 480px) {
            #map {
                height: 400px;
            }
            h1 {
                font-size: 1.5em;
            }

        }
    
    </style>
</head>
<body>
<?php include 'navbar.php'; ?>

<div class="container">
    <h1>Peta Batas Administrasi</h1>
    <div id="searchForm">
        <div id="buttonContainer">
            <button id="toggleButton" onclick="toggleInputs()">Tampilkan Pencarian</button>
            <div id="inputFields" style="display: none;">
                <input type="text" id="attributeSearch" placeholder="Cari (area)">
                <input type="text" id="latSearch" placeholder="Latitude">
                <input type="text" id="lngSearch" placeholder="Longitude">
                <button onclick="searchFeatures()">Cari</button>
                <button onclick="resetSearch()">Batalkan</button>
            </div>
        </div>
    </div>
    <div id="map"></div>
</div>

    <script>
function toggleInputs() {
    const inputFields = document.getElementById('inputFields');
    
    if (inputFields.style.display === 'none' || inputFields.style.display === '') {
        inputFields.style.display = 'flex'; // Tampilkan input
        inputFields.style.opacity = '1'; // Set opacity
    } else {
        inputFields.style.opacity = '0'; // Animasi menghilang
        setTimeout(() => {
            inputFields.style.display = 'none'; // Sembunyikan input setelah animasi
        }, 500); // Sesuaikan dengan durasi transisi
    }
}




        // Menampilkan indikator pemuatan
function showLoadingIndicator() {
    var loadingIndicator = document.getElementById('loadingIndicator');
    loadingIndicator.style.display = 'block';
}

function hideLoadingIndicator() {
    var loadingIndicator = document.getElementById('loadingIndicator');
    loadingIndicator.style.display = 'none';
}

var map = L.map('map').setView([-10.17702, 123.60703], 7);


        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        

        function getColor(KAB_KOTA) {
            switch (KAB_KOTA) {
                case 'KAB. ALOR': return '#c24fc4'; // Hijau untuk KAB_KOTA "KAB."
            case 'KAB. BELU': return '#6dc230'; // Merah untuk KAB_KOTA "Terlampaui"
            case 'KAB. ENDE': return '#3656c9';
            case 'KAB. FLORES TIMUR': return '#2f96b5';
            case 'KAB. KUPANG': return '#3758bd';
            case 'KAB. LEMBATA': return '#2bbd83';
            case 'KAB. MALAKA': return '#c4315d';
            case 'KAB. MANGGARAI': return '#b8ae49';
            case 'KAB. MANGGARAI BARAT': return '#4225b3';
            case 'KAB. MANGGARAI TIMUR': return '#a82c23';
            case 'KAB. NAGAKEO': return '#3b73b3';
            case 'KAB. NGADA': return '#a32a77';
            case 'KAB. ROTE NDAO': return '#2eb3ac';
            case 'KAB. SABU RAIJUA': return '#6c3199';
            case 'KAB. SIKKA': return '#259c39';
            case 'KAB. SUMBA BARAT': return '#b3c932';
            case 'KAB. SUMBA BARAT DAYA': return '#2abd28';
            case 'KAB. SUMBA TENGAH': return '#b55645';
            case 'KAB. SUMBA TIMUR': return '#bd8928';
            case 'KAB. TIMOR TENGAH SELATAN': return '#997536';
            case 'KAB. TIMOR TENGAH UTARA': return '#5243c4';
            case 'KOTA KUPANG': return '#5e9e36';
                default:
                    return '#A04747'; // Warna default untuk tipe lainnya
            }
        }
        

        var geoJsonLayer;
        var allFeatures = [];
        fetch('get_data.php')
    .then(response => response.json())
    .then(data => {
        geoJsonLayer = L.geoJSON(data, {
            style: function(feature) {
                return {
                    color: '#000000',  // Warna garis batas poligon
                    weight: 0.5, 
                    opacity: 1,
                    fillColor: getColor(feature.properties.KAB_KOTA),  // Warna berdasarkan KAB_KOTA
                    fillOpacity: 0.6
                };
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Kabupaten/Kota:</b> " + feature.properties.KAB_KOTA + "<br>" +
                            "<b>Luas:</b> " + feature.properties.LUAS + " ha<br>" +
                            "<b>Shape Leng:</b> " + feature.properties.Shape_Leng + "<br>" +
                            "<b>Shape Area:</b> " + feature.properties.Shape_Area + "<br>" +
                            "<b>SUMBER:</b> " + feature.properties.SUMBER);
            }
        }).addTo(map);
        allFeatures = data.features;
    })
    .catch(error => {
        console.error('Error loading the GeoJSON file:', error);
    });


L.control.compass = function(opts) {
    return new L.Control.Compass(opts);
}

// Menambahkan kontrol kompas ke peta
L.control.compass({ position: 'topright' }).addTo(map);


        function searchFeatures() {
    // Ambil nilai input
    var attributeValue = document.getElementById('attributeSearch').value.trim().toLowerCase();
    var lat = parseFloat(document.getElementById('latSearch').value);
    var lng = parseFloat(document.getElementById('lngSearch').value);

    // Filter fitur berdasarkan kriteria pencarian
    var foundFeatures = allFeatures.filter(function(feature) {
        var properties = feature.properties;

        // Cek apakah pencarian atribut diperlukan (jika input atribut diisi)
        var matchesAttribute = attributeValue === '' || 
            Object.values(properties).some(function(prop) {
                return String(prop).toLowerCase().includes(attributeValue);
            });

        // Cek apakah pencarian koordinat diperlukan (jika lat dan lng diisi)
        var matchesLatLng = true;
        if (!isNaN(lat) && !isNaN(lng)) {
            var point = turf.point([lng, lat]);
            matchesLatLng = turf.booleanPointInPolygon(point, feature);
        }

        // Cocokkan berdasarkan kriteria
        return matchesAttribute && matchesLatLng;
    });

    // Jika fitur ditemukan, sorot dan perbesar ke lokasi
    if (foundFeatures.length > 0) {
        // Hapus layer sebelumnya
        if (geoJsonLayer) {
            map.removeLayer(geoJsonLayer);
        }

        // Tambahkan fitur yang ditemukan ke layer baru
        geoJsonLayer = L.geoJSON(foundFeatures, {
            style: function(feature) {
                return {
                    color: '#0000FF',
                    weight: 2,
                    opacity: 1,
                    fillColor: getColor(feature.properties.KAB_KOTA),
                            fillOpacity: 0.6
                        };
                    },
                    onEachFeature: function (feature, layer) {
                        layer.bindPopup("<b>Kabupaten/Kota:</b> " + feature.properties.KAB_KOTA + "<br>" +
                                    "<b>Luas:</b> " + feature.properties.LUAS + " ha<br>" +
                                    "<b>Shape Leng:</b> " + feature.properties.Shape_Leng + "<br>" +
                                    "<b>Shape Area:</b> " + feature.properties.Shape_Area + "<br>" +
                                    "<b>SUMBER:</b> " + feature.properties.SUMBER).openPopup();
                    }
                }).addTo(map);

        // Perbesar dan sorot ke semua fitur yang ditemukan
        var foundLayers = geoJsonLayer.getLayers();
        if (foundLayers.length > 0) {
            var bounds = foundLayers[0].getBounds();  // Gunakan bounds dari layer pertama
            foundLayers.forEach(function(layer) {
                bounds.extend(layer.getBounds());  // Perluas bounds untuk setiap layer
            });
            map.fitBounds(bounds);  // Perbesar peta ke semua bounds yang ditemukan
        }

    } else {
        alert('Fitur tidak ditemukan berdasarkan kriteria pencarian.');
    }
}



        // Fungsi untuk membatalkan pencarian dan mengembalikan peta ke keadaan semula
        function resetSearch() {
            // Hapus nilai input
            document.getElementById('attributeSearch').value = '';
            document.getElementById('latSearch').value = '';
            document.getElementById('lngSearch').value = '';

            // Hapus layer sebelumnya
            if (geoJsonLayer) {
                map.removeLayer(geoJsonLayer);
            }

            // Tambahkan kembali semua fitur ke peta
            geoJsonLayer = L.geoJSON(allFeatures, {
                style: function(feature) {
                    return {
                        color: '#8B0000',
                        weight: 1.5,
                        opacity: 1,
                        fillColor: getColor(feature.properties.KAB_KOTA),
                        fillOpacity: 0.6
                    };
                },
                onEachFeature: function (feature, layer) {
                    layer.bindPopup("<b>Kabupaten/Kota:</b> " + feature.properties.KAB_KOTA + "<br>" +
                                    "<b>Luas:</b> " + feature.properties.LUAS + " ha<br>" +
                                    "<b>Shape Area:</b> " + feature.properties.Shape_Area + "<br>" +
                                    "<b>Shape Leng:</b> " + feature.properties.Shape_Leng + "<br>" +
                                    "<b>SUMBER:</b> " + feature.properties.SUMBER);
                }
            }).addTo(map);
        }

        var drawnItems = new L.FeatureGroup();
        map.addLayer(drawnItems);

        var drawControl = new L.Control.Draw({
            edit: {
                featureGroup: drawnItems
            }
        });
        map.addControl(drawControl);

        map.on(L.Draw.Event.CREATED, function (e) {
            var layer = e.layer;
            drawnItems.addLayer(layer);

            // Menambahkan pop-up dengan tombol unduh
            var popupContent = `
                <p>Anda telah menggambar area ini.</p>
                <button id="downloadButton">Unduh Data</button>
            `;
            layer.bindPopup(popupContent).openPopup();
        });

        // Menambahkan event listener untuk tombol unduh
        map.on('popupopen', function (e) {
            var popup = e.popup;
            var button = popup.getElement().querySelector('#downloadButton');
            if (button) {
                button.addEventListener('click', function () {
                    // Tutup pop-up
                    map.closePopup();

                    // Jalankan fungsi unduh
                    downloadMap();
                });
            }
        });

        var combinedLayer = L.layerGroup();

// Fungsi untuk mendapatkan lokasi saat ini
function locateUser() {
    map.locate({ setView: false, maxZoom: 20, enableHighAccuracy: true });

    map.on('locationfound', function(e) {
        combinedLayer.clearLayers();
        L.marker(e.latlng).addTo(combinedLayer)
            .bindPopup("Anda berada di sini. Akurasi: " + e.accuracy + " meter")
            .openPopup();
        L.circle(e.latlng, e.accuracy).addTo(combinedLayer);
        map.setView(e.latlng, 15, { animate: true });

        if (!map.hasLayer(combinedLayer)) {
            combinedLayer.addTo(map);
        }
    });

    map.on('locationerror', function(e) {
        alert("Lokasi Anda tidak dapat ditemukan.");
    });
}

// Fungsi untuk membuat legenda
function locateUser() {
        map.locate({ setView: false, maxZoom: 20, enableHighAccuracy: true });

        map.on('locationfound', function(e) {
            combinedLayer.clearLayers();
            L.marker(e.latlng).addTo(combinedLayer)
                .bindPopup("Anda berada di sini. Akurasi: " + e.accuracy + " meter")
                .openPopup();
            L.circle(e.latlng, e.accuracy).addTo(combinedLayer);
            map.setView(e.latlng, 15, { animate: true });

            if (!map.hasLayer(combinedLayer)) {
                combinedLayer.addTo(map);
            }
        });

        map.on('locationerror', function(e) {
            alert("Lokasi Anda tidak dapat ditemukan.");
        });
    }

    // Fungsi untuk membuat legenda
    function createLegend() {
        var legend = L.control({ position: 'bottomright' });

        legend.onAdd = function (map) {
            var div = L.DomUtil.create('div', 'info legend');
            var grades = ['KAB. ALOR','KAB. BELU','KAB. ENDE','KAB. FLORES TIMUR','KAB. KUPANG','KAB. LEMBATA','KAB. MALAKA','KAB. MANGGARAI','KAB. MANGGARAI BARAT','KAB. MANGGARAI TIMUR','KAB. NAGAKEO','KAB. NGADA','KAB. ROTE NDAO','KAB. SABU RAIJUA','KAB. SIKKA','KAB. SUMBA BARAT','KAB. SUMBA BARAT DAYA','KAB. SUMBA TENGAH','KAB. SUMBA TIMUR','KAB. TIMOR TENGAH SELATAN','KAB. TIMOR TENGAH UTARA','KOTA KUPANG'],
                    colors = ['#c24fc4','#6dc230','#3656c9','#2f96b5','#3758bd','#2bbd83','#c4315d','#b8ae49','#4225b3','#a82c23','#3b73b3','#a32a77','#2eb3ac','#6c3199','#259c39','#b3c932','#2abd28','#b55645','#bd8928','#997536','#5243c4','#5e9e36'];

            div.innerHTML = '<h4>Legenda</h4>';
            for (var i = 0; i < grades.length; i++) {
                div.innerHTML +=
                    '<i style="background:' + colors[i] + '"></i> ' +
                    grades[i] + '<br>';
            }

            return div;
        };

        return legend;
    }

    var legendControl = createLegend();

    // Dropdown menu untuk kontrol lokasi dan legenda
    var dropdownMenu = L.control({ position: 'bottomleft' });
    dropdownMenu.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'dropdown');
        div.innerHTML = `
            <button>
                <div class="icon"></div>
            </button>
            <div class="dropdown-content">
                <div class="checkbox">
                    <input type="checkbox" id="locationToggle"> Lokasi Saya
                </div>
                <div class="checkbox">
                    <input type="checkbox" id="legendToggle"> Keterangan Warna
                </div>
            </div>
        `;
        L.DomEvent.on(div, 'click', function () {
            L.DomEvent.stopPropagation(L.DomEvent);
        });
        return div;
    };
    dropdownMenu.addTo(map);

    // Event listener untuk checkbox lokasi pengguna
    document.getElementById('locationToggle').addEventListener('change', function() {
        if (this.checked) {
            locateUser();
        } else {
            combinedLayer.clearLayers();
            map.removeLayer(combinedLayer);
        }
    });

    // Event listener untuk checkbox legenda
    document.getElementById('legendToggle').addEventListener('change', function() {
        if (this.checked) {
            map.addControl(legendControl);
        } else {
            map.removeControl(legendControl);
        }
    });


function downloadMap() {
    if (drawnItems.getLayers().length === 0) {
        alert('Silakan gambar memakai polygon atau rectangle area yang ingin dipilih terlebih dahulu.');
        return;
    }

    var drawnPolygons = drawnItems.getLayers().map(function(layer) {
        return layer.toGeoJSON();
    }).filter(function(geoJson) {
        return geoJson.geometry.type === 'Polygon' || geoJson.geometry.type === 'MultiPolygon';
    });

    if (drawnPolygons.length === 0) {
        alert('Silakan gambar memakai polygon atau rectangle area yang ingin dipilih terlebih dahulu.');
        return;
    }

    function isPolygonWithin(featurePolygon, drawnPolygons) {
        return drawnPolygons.some(function(drawnPolygon) {
            if (drawnPolygon.geometry.type === 'Polygon') {
                return turf.booleanWithin(featurePolygon.geometry, drawnPolygon.geometry);
            } else if (drawnPolygon.geometry.type === 'MultiPolygon') {
                return drawnPolygon.geometry.coordinates.some(function(polygonCoords) {
                    var polygonGeoJson = {
                        "type": "Polygon",
                        "coordinates": polygonCoords
                    };
                    return turf.booleanWithin(featurePolygon.geometry, polygonGeoJson);
                });
            }
            return false;
        });
    }

    function splitMultiPolygon(multiPolygon) {
        return multiPolygon.geometry.coordinates.map(function(coords) {
            return {
                "type": "Polygon",
                "coordinates": coords
            };
        });
    }

    var selectedFeatures = {
        "type": "FeatureCollection",
        "features": geoJsonLayer.toGeoJSON().features.filter(function(feature) {
            if (feature.geometry.type === 'Polygon') {
                return isPolygonWithin(feature, drawnPolygons);
            } else if (feature.geometry.type === 'MultiPolygon') {
                var polygons = splitMultiPolygon(feature);
                return polygons.some(function(polygon) {
                    return isPolygonWithin({"type": "Feature", "geometry": polygon}, drawnPolygons);
                });
            }
            return false;
        })
    };

    if (selectedFeatures.features.length === 0) {
        alert('Tidak ada fitur yang berada dalam area yang dipilih.');
        return;
    }

    map.fitBounds(drawnItems.getBounds());

    var elementsToHide = document.querySelectorAll('.leaflet-control, .legend');
    elementsToHide.forEach(function(el) {
        if (el.id !== 'kompas') {
            el.style.display = 'none';
        }
    });

    map.once('moveend', function() {
        var mapContainer = document.getElementById('map');

        var loadingMessage = document.createElement('div');
        loadingMessage.innerText = 'Mengambil gambar peta...';
        loadingMessage.style.position = 'absolute';
        loadingMessage.style.top = '10px';
        loadingMessage.style.left = '10px';
        loadingMessage.style.backgroundColor = 'rgba(255, 255, 255, 0.8)';
        loadingMessage.style.padding = '10px';
        document.body.appendChild(loadingMessage);

        domtoimage.toPng(mapContainer)
        .then(function(dataUrl) {
            elementsToHide.forEach(function(el) {
                el.style.display = 'block';
            });
            document.body.removeChild(loadingMessage);

            const { jsPDF } = window.jspdf;
            var pdf = new jsPDF('portrait', 'px', 'a4');

            var a4Width = 537; // Lebar A4 dalam pixels
            var a4Height = 1122; // Tinggi A4 dalam pixels

            var margin = 38; // Margin dalam pixels (1 cm)

            var imageWidth = a4Width - 2     * margin; 
            var imageHeight = 400; // Tinggi gambar tetap untuk menyisakan ruang untuk teks di bawahnya

            // Tambahkan gambar peta ke PDF
            pdf.addImage(dataUrl, 'PNG', margin, margin, imageWidth, imageHeight);
            
            // Pindahkan posisi untuk teks (di bawah gambar)
            var textStartY = margin + imageHeight + 20; // Tambahkan jarak antara gambar dan teks

            // Tambahkan informasi fitur di bawah gambar
            selectedFeatures.features.forEach(function(feature, index) {
                var text = "Kabupaten/Kota: " + feature.properties.KAB_KOTA + "\n" +
                       "Luas: " + feature.properties.LUAS + " ha\n" +
                       "Shape_Leng: " + feature.properties.Shape_Leng + "\n" +
                       "Shape Area: " + feature.properties.Shape_Area + "\n\n" +
                       "SUMBER: " + feature.properties.SUMBER + "\n\n";

                var splittedText = pdf.splitTextToSize(text, a4Width - 2 * margin);

                pdf.text(splittedText, margin, textStartY);
                textStartY += splittedText.length * 10; // Tambahkan spasi untuk setiap blok teks

                // Jika tinggi teks melebihi halaman, tambahkan halaman baru
                if (textStartY > a4Height - margin) {
                    pdf.addPage();
                    textStartY = margin;
                }
            });

            pdf.save('Peta_Administrasi_Selektif.pdf');
        })
        .catch(function(error) {
            document.body.removeChild(loadingMessage);
            console.error('Error generating PDF:', error);
            alert('Terjadi kesalahan saat menghasilkan PDF. Silakan coba lagi.');
        });
    });
}




    </script>
    <?php include 'footer.php'; ?>
</body>
</html>
